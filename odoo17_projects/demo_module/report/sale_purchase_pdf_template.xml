<odoo>
	
	<record id="paperformat_a4_1" model="report.paperformat">
		<field name="name">A4</field>
		<field name="default" eval="True"/>
		<field name="format">A4</field>
		<field name="orientation">Portrait</field>
		<field name="margin_top">5</field>
		<field name="margin_bottom">32</field>
		<field name="margin_left">7</field>
		<field name="margin_right">7</field>
		<field name="header_spacing">35</field>
	</record> 
	<record id="action_sales_purchase_report" model="ir.actions.report">
		<field name="name">Sales and Purchase Report</field>
		<field name="model">sales.purchase.details.wizard</field>
		<field name="report_type">qweb-pdf</field>
		<field name="report_name">demo_module.report_sales_purchase_template</field>
		<field name="report_file">demo_module.report_sales_purchase_template</field>
		<field name="binding_model_id" ref="demo_module.model_sales_purchase_details_wizard"/>
		<field name="binding_type">report</field>
		<field name="print_report_name">'Sales_Purchase_Report_%s' % (object.start_date)</field>
		 <field name="paperformat_id" ref="demo_module.paperformat_a4_1"/> 
	</record>


	<template id="custom_header">
		<t t-set="company" t-value="user.company_id"/>
		<div class="pt-5">
			<div class="oe-structure">
			</div>
		</div>
			<header class="o_custom_report_header">
			    <div style="text-align: center;">
			        <h2><t t-esc="company.name"/></h2>
			        <p><t t-esc="company.phone"/>, <t t-esc="company.email"/></p>
			        <p><t t-esc="company.street"/>, <t t-esc="company.city"/>, <t t-esc="company.country_id.name"/></p>
			        <hr/>
			    </div>
			</header>
	</template>

	<template id="custom_footer">
		<footer>

		</footer>
	</template>

	<template id="report_sales_purchase_template">
		<t t-call="web.html_container">
			<t t-call="web.external_layout">
				<t t-set="doc" t-value="docs[0]"/>
				<t t-call="demo_module.custom_header"/> 
				<div class="page">
					<h2>Sales and Purchase Report</h2>
					<t t-foreach="docs" t-as="wizard">
						<p>Partner: <t t-esc="wizard.partner_id.name"/></p>
						<p>From <t t-esc="wizard.start_date"/> to <t t-esc="wizard.end_date"/></p>

						<h3>Sales Orders</h3>
						<t t-if="wizard.get_sales_data()">

							<table class="table table-condensed">
								<thead>
									<tr>
										<th>Order NO</th>
										<th>Product</th>
										<th>Qty</th>
										<th>Unit Price</th>
										<th>Tax</th>
										<th>Total Without Tax</th>
										<th>Total With Tax</th>
										<th>Status</th>
									</tr>
								</thead>
								<tbody>
									<t t-foreach="wizard.get_sales_data()" t-as="sale">
										<tr>
											<td t-esc="sale['order_no']"/>
											<td t-esc="sale['product']"/>
											<td t-esc="sale['qty']"/>
											<td t-esc="sale['price']"/>
											<td t-esc="sale['tax']"/>
											<td t-esc="sale['total_without_tax']"/>
											<td t-esc="sale['total_with_tax']"/>
											<td t-esc="sale['status']"/>
										</tr>
									</t>
								</tbody>
							</table>
						</t>
						<t t-else="">
							<p style="color: red; font-weight: bold;">No sales data available.</p>
						</t>

						<h3>Purchase Orders</h3>
						<t t-if="wizard.get_purchase_data()">

							<table class="table table-condensed">
								<thead>
									<tr>
										<th>Order NO</th>
										<th>Product</th>
										<th>Qty</th>
										<th>Unit Price</th>
										<th>Tax</th>
										<th>Total Without Tax</th>
										<th>Total With Tax</th>
										<th>Status</th>                                
									</tr>
								</thead>
								<tbody>
									<t t-foreach="wizard.get_purchase_data()" t-as="purchase">
										<tr>
										   <td t-esc="purchase['order_no']"/>
											<td t-esc="purchase['product']"/>
											<td t-esc="purchase['qty']"/>
											<td t-esc="purchase['price']"/>
											<td t-esc="purchase['tax']"/>
											<td t-esc="purchase['total_without_tax']"/>
											<td t-esc="purchase['total_with_tax']"/>
											<td t-esc="purchase['status']"/>
										</tr>
									</t>
								</tbody>
							</table>
						</t>
						<t t-else="">
							<p style="color: red; font-weight: bold;">No purchase data available.</p>
						</t>
					</t>
				</div>
				<t t-call="demo_module.custom_footer"/>
			</t>
		</t>
	</template>
</odoo>
