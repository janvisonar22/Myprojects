<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <template id="dps_pos_session_xzreport.report_pos_session_x">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="dps_pos_session_xzreport.front_sales_report_pdf_template"/>
                </t>
            </t>
        </template>

        <template id="front_sales_report_pdf_template">
            <t t-call="web.html_container">
                <t t-call="web.html_container">
                    <div class="page">
                        <t t-foreach="docs" t-as="o">
                            
                            <div align="center" style="border:2px solid black;margin:0 auto;padding:0 auto;font-size:18px">
                                <strong>POS X Report</strong>
                            </div>


                            <t t-set="gross_total" t-value="o.get_gross_total()"/>
                            <t t-set="gross_profit" t-value="o.get_gross_profit()"/>
                            <t t-set="current_date_time" t-value="o.get_current_date_time()"/>
                            <t t-set="session_date_time" t-value="o.get_session_date_time(True)"/>
                            <t t-set="payments" t-value="o.get_payments()"/>
                            <t t-set="category" t-value="o.get_product_category()"/>
                            <t t-set="gross_net_total" t-value="0"/>
                            <t t-set="company" t-value="o.user_id.company_id"/>
                            <br/>

                            <div align="center" style="margin:0 auto;padding:0 auto;font-size:12px;margin-top:8px;">
                                <div style="font-size:14px;">
                                    <t t-if="o.user_id.company_id.logo">
                                        <img t-if="o.user_id.company_id.logo" t-att-src="image_data_uri(o.user_id.company_id.logo)" alt="Logo" style="width:40%;"/><br/>
                                    </t>
                                    <t t-if="o.user_id.company_id.name">
                                        <b><t t-esc="o.user_id.company_id.name"/></b><br/>
                                    </t>
                                    <t t-if="o.user_id.company_id.street">
                                        <t t-esc="o.user_id.company_id.street"/><br/>
                                    </t>
                                    <t t-if="o.user_id.company_id.street2">
                                        <t t-esc="o.user_id.company_id.street2"/>
                                    </t>
                                    <t t-if="o.user_id.company_id.city">
                                        <t t-esc="o.user_id.company_id.city"/>
                                    </t>
                                    <t t-if="o.user_id.company_id.state_id.name">
                                        <t t-esc="o.user_id.company_id.state_id.name"/>
                                    </t>
                                    <t t-if="o.user_id.company_id.country_id.name">
                                        <t t-esc="o.user_id.company_id.country_id.name"/>
                                    </t><br/>
                                    <t t-if="o.user_id.company_id.phone">
                                        Tel: <t t-esc="o.user_id.company_id.phone"/><br/>
                                    </t>
                                    <t t-if="o.user_id.company_id.email">
                                        Email: <t t-esc="o.user_id.company_id.email"/><br/>
                                    </t>
                                    <t t-if="o.user_id.company_id.website">
                                        Website: <t t-esc="o.user_id.company_id.website"/><br/>
                                    </t>
                                    <t t-if="o.user_id">
                                        Salesperson: <t t-esc="o.user_id.name"/><br/>
                                    </t>
                                </div>
                            </div>

                            <table style="width:100%; margin-top:15px;">
                                <tr>
                                    <td>
                                        Report Date
                                    </td>
                                    <td align="right">
                                        <span t-esc="current_date_time.get('date')"/>
                                    </td>
                                </tr>
                            </table>
                            <table style="width:100%;">
                                <tr>
                                    <td>
                                        Report Time 
                                    </td>
                                    <td align="right">
                                        <span t-esc="current_date_time.get('time')"/>
                                    </td>
                                </tr>
                            </table>


                            <table style="width:100%;margin-top:15px;">
                                <tr>
                                    <td class="text-left">
                                        Report Date
                                    </td>
                                    <td align="right">
                                        <span t-esc="current_date_time.get('date')"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-left">
                                        Report Time
                                    </td>
                                    <td align="right">
                                        <span t-esc="current_date_time.get('time')"/>
                                    </td>
                                </tr>
                            </table>
                            <table style="width:100%;margin-top:15px;">
                                <tr>
                                    <td class="text-left">
                                        Register #
                                    </td>
                                    <td align="right">
                                        1
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-left">
                                        Batch #
                                    </td>
                                    <td align="right">
                                        <span t-esc="o.name"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-left">
                                        Batch Status
                                    </td>
                                    <td align="right">
                                        <span t-esc="o.state"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-left">
                                        Start Date
                                    </td>
                                    <td align="right">
                                        <span t-esc="session_date_time.get('start_date')"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-left">
                                        Start Time
                                    </td>
                                    <td align="right">
                                        <span t-esc="session_date_time.get('time')"/>
                                    </td>
                                </tr>
                            </table>
                            <table style="width:100%;margin-top:15px;">
                                <tbody>
                                    <tr>
                                        <td class="text-left">
                                            Opening Total
                                        </td>
                                        <td align="right">
                                            <span t-esc="o.cash_register_balance_start"
                                                  t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="text-left">
                                            Sales
                                        </td>
                                        <td align="right">
                                            <span t-esc="o.get_total_sales()"
                                                  t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="text-left">
                                            Sales Returns
                                        </td>
                                        <td align="right">
                                            <span t-esc="o.get_total_return_sales()"
                                                  t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="text-left">
                                            Tax
                                        </td>
                                        <td align="right">
                                            <span t-esc="o.get_total_tax()"
                                                  t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="text-left">
                                            Discount Amount
                                        </td>
                                        <td align="right">
                                            <span t-esc="o.get_total_discount()"
                                                  t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="text-left">
                                            Gross Total
                                        </td>
                                        <td align="right">
                                            <span t-esc="gross_total"
                                                  t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="text-left">
                                            Gross Profit
                                        </td>
                                        <td align="right">
                                            <span t-esc="gross_profit"
                                                  t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="text-left">
                                            Net Gross Profit
                                        </td>
                                        <td align="right">
                                            <span t-esc="gross_total - gross_profit"
                                                  t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                        </td>
                                    </tr>
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td colspan="2" style="border-bottom:2px solid;"/>
                                    </tr>
                                </tfoot>
                            </table>

                            <t t-if="o.get_product_category().get('sold_product')">
                                <t t-set="product_total" t-value="0"/>
                                <div align="center" style="margin-top:10px !important;">
                          
                                    <strong>Category Wise Sales</strong>

                                </div>
                                <table style="width:100%;margin-top:15px;">
                                    <tr t-foreach="o.get_product_category().get('sold_product')" t-as="l">
                                        <t t-set="product_total" t-value="product_total + l_value"/>
                                        <td class="text-left">
                                            <t t-if="l == 'undefine'">
                                                    Others
                                            </t>
                                            <t t-else="">
                                                <span t-esc="l"/>
                                            </t>

                                        </td>
                                        <td align="right">
                                            <span t-esc="l_value"/>
                                        </td>
                                    </tr>
                                </table>
                                <table style="width:100%;">
                                    <tr>
                                        <td style="width:50%;">
                                        </td>
                                        <td style="width:50%; !important" align="right">
                                            ________________________
                                        </td>
                                    </tr>
                                </table>
                                <table style="width:100%">
                                    <tr>
                                        <td style="width:50%; font-weight:bold;" class="text-left">
                                            Total
                                        </td>
                                        <td style="width:50%; !important" align="right">
                                            <span t-esc="product_total"/>
                                        </td>
                                    </tr>
                                </table>
                            </t>

                            <t t-if="o.get_taxes_data()">
                                <t t-set="tax_total" t-value="0"/>
                                <div align="center" style="margin-top:10px !important;">
                                    <strong>  Taxes Detail</strong>
                                </div>
                                <table style="width:100%;margin-top:15px;">
                                    <tr>
                                        <td style="width:60%; border-bottom:2pt dotted black;">
                                            Tax
                                        </td>
                                        <td align="right" style="width:40%; border-bottom:2pt dotted black;">
                                            Amount
                                        </td>
                                    </tr>
                                    <tr t-foreach="o.get_taxes_data()" t-as="pl">
                                        <t t-set="tax_total" t-value="tax_total + pl_value"/>
                                        <td class="text-left">
                                            <t t-if="pl == 'undefine'">
                                                    Others
                                            </t>
                                            <t t-else="">
                                                <span t-esc="pl"/>
                                            </t>
                                        </td>
                                        <td align="right">
                                            <span t-esc="pl_value" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                        </td>
                                    </tr>
                                </table>
                                <table style="width:100%;">
                                    <tr>
                                        <td style="width:50%;"></td>
                                        <td align="right" style="width:50%;">
                                            ________________________
                                        </td>
                                    </tr>
                                </table>
                                <table style="width:100%">
                                    <tr>
                                        <td style="width:50%;" class="text-left">
                                            Total
                                        </td>
                                        <td align="right" style="width:30%;">
                                            <span t-esc="tax_total" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                        </td>
                                    </tr>
                                </table>
                            </t>


                            <t t-if="o.get_payments()">
                                <div style="text-align:center">
                                    <br/>
                                    <strong>Payment Detail</strong>
                                </div>
                                <table style="width:100%;margin-top:15px;">
                                    <t t-set="total" t-value="0"/>
                                    <t t-set="qty_payment_method" t-value="0"/>
                                    
                                    <tr t-foreach="o.get_payments()" t-as="l">
                                        <td class="text-left">
                                            <span t-esc="l.get('name')"/>
                                        </td>
                                        <td align="right">
                                            <span t-esc="l.get('total')" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                            <t t-set="total" t-value="total + l.get('total')"/>
                                        </td>
                                    </tr>
                                </table>
                                <table style="width:100%;">
                                    <tr>
                                        <td style="width:50%;"></td>
                                        <td align="right" style="width:50%;">
                                            ________________________
                                        </td>
                                    </tr>
                                </table>
                                <table style="width:100%">
                                    <tr>
                                        <td style="width:50%;" class="text-left">
                                            Total
                                        </td>
                                        <td align="right" style="width:30%;">
                                            <span t-esc="total" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                                        </td>
                                    </tr>
                                </table>
                                <br/><br/>
                                <center><strong>Thank you !</strong></center>
                            </t>
                        </t>
                    </div>
                </t>
            </t>
        </template>
    </data>
</odoo>
